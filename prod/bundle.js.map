{"version":3,"sources":["webpack:///webpack/bootstrap 4ba7406721b2b707c843","webpack:///./main.js","webpack:///external \"botkit\"","webpack:///external \"ticketmaster\"","webpack:///./modules/hello.js","webpack:///./config.json","webpack:///./modules/help.js","webpack:///./modules/findMe.js","webpack:///external \"requestify\"","webpack:///./modules/test.js"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 4ba7406721b2b707c843\n **/","var Botkit = require('botkit');\r\nvar TM = require('ticketmaster');\r\n\r\n// var NODE_ENV = process.env.token;\r\nvar config = 'direct_message,direct_mention,mention';\r\n\r\nif (!NODE_ENV) {\r\n  console.error('Error: Specify token in environment');\r\n  process.exit(1);\r\n}\r\n\r\nvar d2 = TM('4xtBeBzeiKY7k73xilQsLxVpPpEAxhQh').discovery.v2;\r\n\r\nvar controller = Botkit.slackbot({debug: true/*, logLevel: 6*/});\r\n\r\nvar bot = controller.spawn({\r\n  token: NODE_ENV\r\n}).startRTM(function (err, bot, payload) {\r\n  if (err) throw new Error('Could not connect to Slack');\r\n});\r\n\r\ncontroller.hears(['hello', 'hi'], config, require('./modules/hello')(controller, d2));\r\n\r\ncontroller.hears(['help', 'how can I use you', 'who is you purpose', 'help me', 'guide'], config, require('./modules/help'));\r\n\r\ncontroller.hears(['find me(.*)?', 'surprise me'], config, require('./modules/findMe')(d2));\r\n\r\ncontroller.hears(['test'], config, require('./modules/test'));\n\n\n/** WEBPACK FOOTER **\n ** ./main.js\n **/","module.exports = require(\"botkit\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"botkit\"\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = require(\"ticketmaster\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ticketmaster\"\n ** module id = 2\n ** module chunks = 0\n **/","var data = require('../config.json').hello;\r\n\r\nmodule.exports = function (controller, d2) {\r\n  return function (bot, message) {\r\n    bot.api.reactions.add({\r\n      timestamp: message.ts,\r\n      channel: message.channel,\r\n      name: 'robot_face'\r\n    }, function(err, res) {\r\n      if (err) {\r\n        bot.botkit.log('Failed to add emoji reaction :(', err);\r\n      }\r\n    });\r\n\r\n    controller.storage.users.get(message.user, function(err, user) {\r\n      if (err) throw new Error(err.message);\r\n      if (user && user.name) {\r\n        bot.reply(message, 'Hello ' + user.name + '!');\r\n        d2.event\r\n          .all()\r\n          .then(function(events) {\r\n            // \"events\" is an array of Ticketmaster event information\r\n            console.log(events);\r\n            bot.reply(message, events);\r\n          });\r\n      } else {\r\n        bot.reply(message, data.msg[0]);\r\n      }\r\n    });\r\n  }\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./modules/hello.js\n **/","module.exports = {\n\t\"hello\": {\n\t\t\"msg\": [\n\t\t\t\"Hello. How are you?\"\n\t\t]\n\t},\n\t\"help\": [\n\t\t\"*Type:*\",\n\t\t\"Find me {keyword}\",\n\t\t\"What on {city}\",\n\t\t\"Events (today|tomorrow,this week|next week)\",\n\t\t\"Give me {classification name}\",\n\t\t\"Surprise me.\"\n\t],\n\t\"findMe\": {\n\t\t\"reqUrl\": {\n\t\t\t\"base\": \"http://api.page2images.com/restfullink?p2i_size=480x720&p2i_screen=370x600&p2i_url=http://ticketmaster-api-staging.github.io/products-and-docs/widgets/event-discovery/oldskool/?id=\",\n\t\t\t\"sufix\": \"&p2i_key=887ae1bc9e2f335f\"\n\t\t},\n\t\t\"randomOptions\": [\n\t\t\t\"Sport\",\n\t\t\t\"Film\",\n\t\t\t\"Family\",\n\t\t\t\"Music\",\n\t\t\t\"Play\"\n\t\t],\n\t\t\"conversation\": {\n\t\t\t\"questions\": [],\n\t\t\t\"expr\": []\n\t\t},\n\t\t\"options\": {\n\t\t\t\"quantity\": 5\n\t\t}\n\t},\n\t\"events\": {},\n\t\"whatsOn\": {}\n};\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./config.json\n ** module id = 4\n ** module chunks = 0\n **/","var msg = require('../config.json').help.join('\\n\\t');\r\nmodule.exports = function (bot, message) {\r\n  bot.reply(message, msg);\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./modules/help.js\n **/","var config = require('../config.json').findMe;\r\nvar requestify = require('requestify');\r\n\r\n// Random search\r\nfunction getRandomRes() {\r\n  return config.randomOptions[~~(Math.random() * 100) % config.randomOptions.length];\r\n}\r\n\r\n// \"events\" is an array of Ticketmaster event information\r\nfunction eventInfo(arr) {\r\n  var str = '', event, place, startDate;\r\n\r\n  for (var i = 0; i < arr.length; i++) {\r\n    event = arr[i];\r\n    startDate = event.dates.start;\r\n    place = event._embedded.venues[0].name ? `in ${event._embedded.venues[0].name}`: '';\r\n    str = `${str} *${i + 1}* - ${event.name} ${place}\\n ${startDate.localTime} ${startDate.localDate}\\n\\n`;\r\n  }\r\n  return str;\r\n}\r\n\r\nfunction getAttachemens(event) {\r\n  \"use strict\";\r\n  let startDate = event.dates.start;\r\n\r\n  return {\r\n    attachments: [\r\n      {\r\n        title: event.name || \"\",\r\n        pretext: `${event._embedded.venues[0].name || ''} ${startDate.localTime} ${startDate.localDate}`,\r\n        text: event.info,\r\n        mrkdwn_in: [\r\n          \"text\",\r\n          \"pretext\"\r\n        ],\r\n        image_url: event.images[0].url\r\n      }\r\n    ]\r\n  };\r\n}\r\n\r\n/**\r\n * http://api.page2images.com/restfullink?p2i_size=480x720&p2i_screen=370x600&p2i_url=http://ticketmaster-api-staging.github.io/products-and-docs/widgets/event-discovery/oldskool/?id=LvZ184t4Qfovi_GmuZZRd&p2i_key=887ae1bc9e2f335f\r\n * start a conversation to handle this response.\r\n * @param events\r\n */\r\n\r\nlet errorHandler = (err) => {\r\n  bot.reply(message, 'Sorry, no results on your request!');\r\n};\r\n\r\nmodule.exports = d2 => (bot, message) => {\r\n  let keyword = message.match[1] && message.match[1].trim(),\r\n    options = {};\r\n\r\n  /**\r\n   * Random options\r\n   */\r\n  if (!keyword) {\r\n    let option = getRandomRes();\r\n    options.classificationName = option;\r\n    bot.reply(message, `You and your friends usually search for ${option.toLowerCase()}.`)\r\n  }\r\n\r\n  options.keyword = keyword || '';\r\n  options.size = config.options.quantity;\r\n\r\n  d2.event\r\n    .all(options)\r\n    .then(events => {\r\n      bot.reply(message, eventInfo(events));\r\n      bot.startConversation(message, (err, convo) => {\r\n        convo.ask('Do you need details? Say number or NO.', (response, convo) => {\r\n          let answer = response.text;\r\n          convo.say(`Cool, you said: ${answer}`);\r\n\r\n          let n = Number.parseInt(answer, 10);\r\n\r\n          if (n && n > 0 && n <= events.length) {\r\n            let i = n - 1;\r\n            let rich = getAttachemens(events[i]);\r\n            bot.reply(message, rich);\r\n            bot.startConversation(message, function(err, convo) {\r\n              convo.ask('Do you need ticket? Say YES or NO.', (response, convo) => {\r\n                let answer = response.text;\r\n                convo.say(`Cool, you said: ${answer}`);\r\n                if (answer.toLowerCase().match(/(y|yes)/)) {\r\n\r\n                  var ticket;\r\n                  let estimated_need_time = 5;\r\n\r\n                  requestify\r\n                    .get([config.reqUrl.base, events[i].id, config.reqUrl.sufix].join(''))\r\n                    .then(function(response) {\r\n                      // Get the response body (JSON parsed or jQuery object for XMLs)\r\n                      console.log(response.getBody());\r\n                      var result = JSON.parse(response.getBody());\r\n                      if (result.image_url) {\r\n                        ticket = result.image_url;\r\n                      } else {\r\n                        if (result.estimated_need_time) {\r\n                          estimated_need_time = Number.parseInt(result.estimated_need_time, 10);\r\n                        }\r\n                      }\r\n                    });\r\n\r\n                  if (!ticket) {\r\n                    setTimeout(function () {\r\n                      console.log('GET IAMGE');\r\n                      requestify\r\n                        .get([config.reqUrl.base, events[i].id, config.reqUrl.sufix].join(''))\r\n                        .then(function (response) {\r\n                          // Get the response body (JSON parsed or jQuery object for XMLs)\r\n                          console.log(response.getBody());\r\n                          var result = JSON.parse(response.getBody());\r\n                          if (result.image_url) {\r\n                            ticket = result.image_url;\r\n                            var rich = {\r\n                              \"attachments\": [\r\n                                {\r\n                                  \"title\": \"Your ticket\",\r\n                                  \"image_url\": ticket\r\n                                }\r\n                              ]\r\n                            };\r\n                            bot.reply(message, rich);\r\n                          }\r\n                        });\r\n                    }, estimated_need_time * 1000);\r\n                  }\r\n                }\r\n                convo.next();\r\n              });\r\n            });\r\n          }\r\n\r\n          convo.next();\r\n        });\r\n      });\r\n    })\r\n    .catch(errorHandler);\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./modules/findMe.js\n **/","module.exports = require(\"requestify\");\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"requestify\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = function (bot, message) {\r\n  bot.reply(message, 'http://api.page2images.com/directlink?p2i_size=500x0&p2i_screen=370x600&p2i_url=http://ticketmaster-api-staging.github.io/products-and-docs/widgets/event-discovery/oldskool/?id=LvZ184t4Qfovi_GmuZZRd&p2i_key=3ffe4d179f686d6f');\r\n  //  bot.reply(message, 'http://ticketmaster-api-staging.github.io/products-and-docs/widgets/event-discovery/oldskool/?id=LvZ184t4Qfovi_GmuZZRd');\r\n  var cm = {\r\n    \"text\": \"Would you like to play a game?\",\r\n    \"attachments\": [\r\n      {\r\n        \"text\": \"Choose a game to play\",\r\n        \"fallback\": \"You are unable to choose a game\",\r\n        \"callback_id\": \"wopr_game\",\r\n        \"color\": \"#3AA3E3\",\r\n        \"attachment_type\": \"default\",\r\n        \"actions\": [\r\n          {\r\n            \"name\": \"chess\",\r\n            \"text\": \"Chess\",\r\n            \"type\": \"button\",\r\n            \"value\": \"chess\"\r\n          },\r\n          {\r\n            \"name\": \"maze\",\r\n            \"text\": \"Falken's Maze\",\r\n            \"type\": \"button\",\r\n            \"value\": \"maze\"\r\n          },\r\n          {\r\n            \"name\": \"war\",\r\n            \"text\": \"Thermonuclear War\",\r\n            \"style\": \"danger\",\r\n            \"type\": \"button\",\r\n            \"value\": \"war\",\r\n            \"confirm\": {\r\n              \"title\": \"Are you sure?\",\r\n              \"text\": \"Wouldn't you prefer a good game of chess?\",\r\n              \"ok_text\": \"Yes\",\r\n              \"dismiss_text\": \"No\"\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  };\r\n  bot.reply(message, cm);\r\n};\n\n\n/** WEBPACK FOOTER **\n ** ./modules/test.js\n **/"],"sourceRoot":""}